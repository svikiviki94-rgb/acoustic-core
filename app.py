import streamlit as st
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
from io import StringIO

st.set_page_config(page_title="Acoustic Core Designer", layout="wide")

st.title("ðŸ”Š Acoustic Core Designer â€” Numerical (Geometry-Only)")
st.caption("Estimate thickness, porosity, or cell size to meet an attenuation target using your datasets. Material losses are neglected.")

# -----------------------------
# Embedded datasets from the user
# -----------------------------

# PN attenuation (thickness sweep): columns = 10 mm, 15 mm, 20 mm
PN_TXT = """Frequency\t10mm\tFrequency\t15mm\tFrequency\t20mm
1000\t0.56332\t1000\t1.0348\t1000\t1.3171
1100\t0.59615\t1100\t1.1048\t1100\t1.3963
1200\t0.62977\t1200\t1.1755\t1200\t1.4739
1300\t0.66412\t1300\t1.2466\t1300\t1.5493
1400\t0.69914\t1400\t1.3177\t1400\t1.6217
1500\t0.73475\t1500\t1.3882\t1500\t1.6905
1600\t0.77088\t1600\t1.4579\t1600\t1.755
1700\t0.80745\t1700\t1.5263\t1700\t1.8148
1800\t0.84439\t1800\t1.5932\t1800\t1.8694
1900\t0.88159\t1900\t1.6581\t1900\t1.9183
2000\t0.91898\t2000\t1.7207\t2000\t1.9611
2100\t0.95646\t2100\t1.7808\t2100\t1.9975
2200\t0.99395\t2200\t1.838\t2200\t2.0273
2300\t1.0314\t2300\t1.8921\t2300\t2.0503
2400\t1.0686\t2400\t1.9428\t2400\t2.0663
2500\t1.1055\t2500\t1.99\t2500\t2.0753
2600\t1.1421\t2600\t2.0334\t2600\t2.0771
2700\t1.1783\t2700\t2.0729\t2700\t2.0719
2800\t1.2139\t2800\t2.1083\t2800\t2.0597
2900\t1.2489\t2900\t2.1394\t2900\t2.0408
3000\t1.2832\t3000\t2.1662\t3000\t2.0153
3100\t1.3167\t3100\t2.1885\t3100\t1.9837
3200\t1.3493\t3200\t2.2063\t3200\t1.9463
3300\t1.3811\t3300\t2.2194\t3300\t1.9037
3400\t1.4118\t3400\t2.2279\t3400\t1.8566
3500\t1.4414\t3500\t2.2317\t3500\t1.8058
3600\t1.4699\t3600\t2.2309\t3600\t1.7522
3700\t1.4971\t3700\t2.2253\t3700\t1.6972
3800\t1.5231\t3800\t2.215\t3800\t1.6421
3900\t1.5478\t3900\t2.2001\t3900\t1.5888
4000\t1.571\t4000\t2.1807\t4000\t1.5393
4100\t1.5928\t4100\t2.1568\t4100\t1.4967
4200\t1.6132\t4200\t2.1285\t4200\t1.4643
4300\t1.6319\t4300\t2.0961\t4300\t1.447
4400\t1.6492\t4400\t2.0595\t4400\t1.4516
4500\t1.6647\t4500\t2.0191\t4500\t1.4875
4600\t1.6787\t4600\t1.9751\t4600\t1.5696
4700\t1.6909\t4700\t1.9277\t4700\t1.7214
4800\t1.7014\t4800\t1.8772\t4800\t1.9827
4900\t1.7101\t4900\t1.8239\t4900\t2.4218
5000\t1.7171\t5000\t1.7682\t5000\t3.1478
5100\t1.7222\t5100\t1.7106\t5100\t4.2595
5200\t1.7256\t5200\t1.6514\t5200\t5.4123
5300\t1.7271\t5300\t1.5913\t5300\t5.2397
5400\t1.7267\t5400\t1.5308\t5400\t3.7994
5500\t1.7245\t5500\t1.4705\t5500\t2.5531
5600\t1.7204\t5600\t1.4113\t5600\t1.8119
5700\t1.7145\t5700\t1.3539\t5700\t1.4111
5800\t1.7067\t5800\t1.2994\t5800\t1.2046
5900\t1.697\t5900\t1.2489\t5900\t1.1094
6000\t1.6856\t6000\t1.2038\t6000\t1.0806
6100\t1.6722\t6100\t1.166\t6100\t1.0934
6200\t1.6571\t6200\t1.1381\t6200\t1.1331
"""

# Porosity sweep: 90%, 80%, 70%
POR_TXT = """Frequency\t90%\tFrequency\t80%\tFrequency\t70%
1000\t0.58926\t1000\t1.0348\t1000\t2.1246
1100\t0.62395\t1100\t1.1048\t1100\t2.2587
1200\t0.65873\t1200\t1.1755\t1200\t2.3923
1300\t0.69353\t1300\t1.2466\t1300\t2.5242
1400\t0.72826\t1400\t1.3177\t1400\t2.6534
1500\t0.76283\t1500\t1.3882\t1500\t2.7789
